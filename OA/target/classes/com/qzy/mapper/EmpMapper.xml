<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qzy.mapper.EmpMapper">
    <insert id="addEmp" parameterType="Emp">
        insert into t_emp values (null,#{no},"123",#{name},#{did},1,#{sex},#{email},#{qq},#{phone},#{createdate},#{photo},0)
    </insert>
    <update id="updateEmp" parameterType="Emp">
        update t_emp set no=#{no},name=#{name},did=#{did},sex=#{sex},email=#{email},phone=#{phone},createdate=#{createdate},photo=#{photo} where id=#{id}
    </update>
    <update id="deleteEmp">
        update t_emp set del = 1 where id =#{id}
    </update>

    <select id="login" resultType="com.qzy.bean.Emp">
         SELECT * FROM t_emp where no=#{no} and pass=#{pass} and del=0
    </select>
    <select id="findAllDepart" resultType="com.qzy.bean.Depart">
        select * from t_depart where del = 0
    </select>
    <select id="findAllStudent" resultType="com.qzy.bean.Student">
        select * from t_student
    </select>
    <select id="getEmp" resultType="com.qzy.bean.Emp">
        select e.id,e.no,e.name,e.did,d.name as pass,e.sex,e.phone,e.qq,e.email,e.createdate from t_emp e inner join qzy.t_depart d on e.did=d.id where e.del = 0 and d.del = 0 limit #{pageStart},#{pageSize} ;
    </select>
    <select id="getTotalCount" resultType="java.lang.Integer">
        select count(id) from t_emp where del = 0;
    </select>
    <select id="selectEmpById" resultType="com.qzy.bean.Emp">
        select e.id,e.no,e.name,d.name as pass,e.sex,e.phone,e.qq,e.email,e.createdate,e.photo,e.did from t_emp e inner join qzy.t_depart d on e.did=d.id where e.id=#{id}
    </select>
</mapper>